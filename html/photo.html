<!doctype html>
<html lang=en>

<head>
    <meta charset="utf-8">
    <title>Rethink RAW: {{.Title}}</title>
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="manifest" href="/manifest.json">
    <link rel="stylesheet" href="/main.css">
    <link rel="stylesheet" href="/photo.css">
    <script>const template = {{.}}</script>
    <script src="/photo.js" defer></script>
</head>
<body>
    <div style="flex: auto; height: 100%; margin: 8px">
        <div id="menu">
            <div class="toolbar">
                <button class="fas" type="button" title="Back" onclick="window.history.back()"><i class="fas fa-arrow-left"></i></button>
                <button class="fas" type="button" title="Save" disabled><i class="fas fas fa-save"></i></button>
                <button class="fas" type="button" title="Export JPEG…" onclick="exportJpeg()"><i class="fas fa-file-image"></i></button>
                <button class="fas" type="button" title="Zoom" disabled><i class="fas fa-search-plus"></i></button>
                <button class="fas" type="button" title="Crop" disabled><i class="fas fa-crop"></i></button>
                <button class="fas" type="button" title="Rotate couterclockwise" onclick="orientationChange('ccw')"><i class="fas fa-rotate-ccw"></i></button>
                <button class="fas" type="button" title="Rotate clockwise" onclick="orientationChange('cw')"><i class="fas fa-rotate-cw"></i></button>
                <button class="fas" type="button" title="Flip horizontally" onclick="orientationChange('hz')"><i class="fas fa-arrows-alt-h"></i></button>
                <button class="fas" type="button" title="Flip vertically" onclick="orientationChange('vt')"><i class="fas fa-arrows-alt-v"></i></button>
                <button class="fas" type="button" title="Settings…" disabled><i class="fas fa-cog"></i></button>
            </div>
        </div>
        <img id="preview" src="/thumb/{{.Path}}">
    </div>

    <form id="settings">
        <input type="hidden" name="orientation">
        <input type="hidden" name="process">

        <fieldset disabled>
            <legend>Profile</legend>
            Treatment:
            <div style="float: right">
                <label class="inline"><input type="radio" name="grayscale" value="false" onchange="treatmentChange(this)">Color</label>
                <label class="inline"><input type="radio" name="grayscale" value="true" onchange="treatmentChange(this)">B&amp;W</label>
            </div>
            <select name="profile" class="below">
                <option style="display:none">
                <option>Adobe Standard</option>
            </select>
        </fieldset>

        <fieldset disabled>
            <legend>White Balance</legend>
            <select name="whiteBalance" onchange="whiteBalanceChange(this)">
                <option style="display:none">
                <option>As Shot</option>
                <option>Auto</option>
                <option>Daylight</option>
                <option>Cloudy</option>
                <option>Shade</option>
                <option>Tungsten</option>
                <option>Fluorescent</option>
                <option>Flash</option>
                <option>Custom</option>
            </select>
            <div class="manualWB">
                <label for="temperature">Temperature <output for="temperature" name="temperature"></output>
                    <input id="temperature" type="range" value="8.612503" min="7.6009026" max="10.819778" step="0.0223533"
                        oninput="temperatureInput(this);setCustomWhiteBalance()" onchange="valueChange()">
                </label>
        
                <label for="tint">Tint <output for="tint" name="tint"></output>
                    <input id="tint" type="range" value="0" min="-150" max="150" step="1"
                        oninput="numberInput(this);setCustomWhiteBalance()" onchange="valueChange()">
                </label>
            </div>
        </fieldset>

        <fieldset disabled>
            <legend>Tone</legend>
            <select name="tone" onchange="toneChange(this)">
                <option style="display:none">
                <option>Auto</option>
                <option>Default</option>
                <option>Custom</option>
            </select>
            <div class="customTone">
                <label for="exposure">Exposure <output for="exposure" name="exposure"></output>
                    <input id="exposure" type="range" value="0" min="-5" max="5" step="0.05"
                        oninput="numberInput(this);setCustomTone()" onchange="valueChange()">
                </label>
                
                <label for="contrast">Contrast <output for="contrast" name="contrast"></output>
                    <input id="contrast" type="range" value="0" min="-100" max="100" step="1"
                        oninput="numberInput(this);setCustomTone()" onchange="valueChange()">
                </label>
                
                <label for="highlights">Highlights <output for="highlights" name="highlights"></output>
                    <input id="highlights" type="range" value="0" min="-100" max="100" step="1"
                        oninput="numberInput(this);setCustomTone()" onchange="valueChange()">
                </label>
                
                <label for="shadows">Shadows <output for="shadows" name="shadows"></output>
                    <input id="shadows" type="range" value="0" min="-100" max="100" step="1"
                        oninput="numberInput(this);setCustomTone()" onchange="valueChange()">
                </label>
                
                <label for="whites">Whites <output for="whites" name="whites"></output>
                    <input id="whites" type="range" value="0" min="-100" max="100" step="1"
                        oninput="numberInput(this);setCustomTone()" onchange="valueChange()">
                </label>
                
                <label for="blacks">Blacks<output for="blacks" name="blacks"></output>
                    <input id="blacks" type="range" value="0" min="-100" max="100" step="1"
                        oninput="numberInput(this);setCustomTone()" onchange="valueChange()">
                </label>
            </div>
        </fieldset>
        
        <fieldset disabled>
            <legend>Presence</legend>
        
            <label for="clarity">Clarity <output for="clarity" name="clarity"></output>
                <input id="clarity" type="range" value="0" min="-100" max="100" step="1"
                    oninput="numberInput(this)" onchange="valueChange()">
            </label>
        
            <label for="dehaze">Dehaze <output for="dehaze" name="dehaze"></output>
                <input id="dehaze" type="range" value="0" min="-100" max="100" step="1"
                    oninput="numberInput(this)" onchange="valueChange()">
            </label>
        
            <div class="color customTone">
                <label for="vibrance">Vibrance <output for="vibrance" name="vibrance"></output>
                    <input id="vibrance" type="range" value="0" min="-100" max="100" step="1"
                        oninput="numberInput(this);setCustomTone()" onchange="valueChange()">
                </label>
        
                <label for="saturation">Saturation <output for="saturation" name="saturation"></output>
                    <input id="saturation" type="range" value="0" min="-100" max="100" step="1"
                        oninput="numberInput(this);setCustomTone()" onchange="valueChange()">
                </label>
            </div>
        </fieldset>
        
        <fieldset disabled>
            <legend>Detail</legend>
        
            <label for="sharpness">Sharpness <output for="sharpness" name="sharpness"></output>
                <input id="sharpness" type="range" value="40" min="0" max="150" step="1"
                    oninput="numberInput(this)" onchange="valueChange()">
            </label>
        
            <label for="luminanceNR">Luminance noise reduction <output for="luminanceNR" name="luminanceNR"></output>
                <input id="luminanceNR" type="range" value="0" min="0" max="100" step="1"
                    oninput="numberInput(this)" onchange="valueChange()">
            </label>
        
            <label for="colorNR">Color noise reduction <output for="colorNR" name="colorNR"></output>
                <input id="colorNR" type="range" value="25" min="0" max="100" step="1"
                    oninput="numberInput(this)" onchange="valueChange()">
            </label>
        </fieldset>
        
        <fieldset disabled>
            <legend>Lens Corrections</legend>
            <label><input type="checkbox" name="lensProfile" onchange="valueChange()">Enable Profile Corrections</label>
            <label><input type="checkbox" name="autoLateralCA" onchange="valueChange()">Remove Chromatic Aberration</label>
        </fieldset>
    </form>
</body>

</html>